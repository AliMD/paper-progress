<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!--

The progress bars are for situations where the percentage completed can be 
determined. They give users a quick sense of how much longer an operation 
will take.

Example:

    <paper-progress value="0.5"></paper-progress>

Styling progress bar:

To change the active progress bar color:

    paper-progress /shadow/ #activeProgress {
      background-color: #e91e63;
    }

To change the buffer progress bar color:

    paper-progress /shadow/ #bufferProgress {
      background-color: #f8bbd0;
    }

@group Quantum Paper Elements
@element paper-progress
@homepage github.io

-->

<link rel="import" href="../polymer/polymer.html">

<polymer-element name="paper-progress" attributes="value min max buffer">

  <template>
  
    <link rel="stylesheet" href="paper-progress.css">
  
    <div id="progressContainer">
    
      <div id="bufferProgress"></div>
      <div id="activeProgress"></div>
      
    </div>
    
  </template>
  
  <script>
  
    Polymer('paper-progress', {
      
      /**
       * The number that represents the current progress.
       *
       * @attribute value
       * @type number
       * @default 0
       */
      value: 0,
      
      /**
       * The number that represents the current buffer progress.
       *
       * @attribute buffer
       * @type number
       * @default 0
       */
      buffer: 0,
      
      /**
       * The number that indicates how much work the task
       * requires in total before it can be considered complete.
       *
       * @attribute max
       * @type number
       * @default 100
       */
      max: 100,
      
      /**
       * The number that indicates the minimum progress value,
       * e.g. no progress made.
       *
       * @attribute min
       * @type number
       * @default 0
       */
      min: 0,
      
      observe: {
        'min max value buffer': 'update'
      },
      
      calcRatio: function(value) {
        return (value - this.min) / (this.max - this.min);
      },
      
      clampValue: function(value) {
        return Math.min(this.max, Math.max(this.min, value));
      },
      
      update: function() {
        this.value = this.clampValue(this.value);
        this.buffer = this.clampValue(this.buffer);
        this.$.activeProgress.style.width = 
            this.calcRatio(this.value) * 100 + '%';
        this.$.bufferProgress.style.width = 
            this.calcRatio(this.buffer) * 100 + '%';
      }
      
    });
    
  </script>
  
</polymer-element>
